@implements IDisposable
@inject BotService Bot
@inject IDialogService DialogService
@page "/settings/auth"
@using BanchoMultiplayerBot
@using BanchoMultiplayerBot.Config
@using BanchoMultiplayerBot.Data

<PageTitle>Settings</PageTitle>

<MudText Typo="Typo.h3" GutterBottom="true">Authentication</MudText>

<MudForm @ref="_form">
    <MudGrid>
        <MudItem xs="6">
            <MudPaper Class="pa-8 ma-2">
                <MudText Typo="Typo.h6" GutterBottom="true">IRC Authentication</MudText>
                <MudTextField @bind-Value="_configuration.Username" T="string" Label="Username" Required="true" RequiredError="Username is required!" Variant="Variant.Filled" />
                <MudTextField @bind-Value="_configuration.Password" T="string" Label="Password" Required="true" RequiredError="Password is required!" InputType="InputType.Password" Variant="Variant.Filled" />
                <MudTooltip Text="If unsure, leave unchecked.">
                    <MudSwitch @bind-Checked="_configuration.IsBotAccount" Label="Is bot account" Color="Color.Primary" />
                </MudTooltip>
            </MudPaper>
        </MudItem>
        <MudItem xs="6">
            <MudPaper Class="pa-8 ma-2">
                <MudText Typo="Typo.h6" GutterBottom="true">osu! API</MudText>
                <MudTextField @bind-Value="_configuration.ApiKey" T="string" Label="API Key" Required="true" RequiredError="API key is required!" InputType="InputType.Password" Variant="Variant.Filled" />
            </MudPaper>
        </MudItem>
    </MudGrid>
</MudForm>

@code {
    private MudForm? _form;
    private BotConfiguration _configuration = null!;

    protected override void OnInitialized()
    {
        _configuration = Bot.Configuration;
    }

    public void Dispose()
    {
    }
}